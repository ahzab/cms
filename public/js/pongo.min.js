Pongo.UI={$body:$(document.body),$win:$(window),$wrapper:$(".wrapper"),$container:$(".container"),$alert_box:$(".alert-msg"),$btn_clicked:null,btn_text:null,lang:null,addSpin:function(e){this.$btn_clicked=e,this.btn_text=this.$btn_clicked.html(),this.checkSpin()||(-1==this.btn_text.indexOf("<i")?this.$btn_clicked.prepend(Pongo.Templates.loading_tpl):this.$btn_clicked.find("i").removeClass().addClass("fa fa-refresh fa fa-spin"))},addShake:function(){Pongo.Form.$form.addClass("shake")},createAlertMessage:function(e){this.$alert_box.remove();var o=$("<div/>").attr("class","alert-msg").addClass(e.status).html(e.msg);"expired"==e.type?Pongo.Form.redirectTo("login"):(this.$alert_box=o,Modernizr.touch?(this.$alert_box.addClass("fixfixed"),this.$body.animate({scrollTop:0},0).prepend(o)):this.$body.prepend(o))},checkSpin:function(){return this.$btn_clicked.find("i").hasClass("fa-spin")},resetBtn:function(){this.btn_text&&this.$btn_clicked&&(this.$btn_clicked.html(this.btn_text),this.$btn_clicked=null)},resetShake:function(){Pongo.Form.$form.removeClass("shake")},resetFieldErrors:function(){var e=Pongo.Form.$form;e.find(".form-group").removeClass("has-error"),e.find(".err").remove()}},Pongo.Block={editor:null,formatTag:function(e,o){switch(e){case"img":return'<img src="'+o+'" />';default:return o}},insertContent:function(e){this.editor.insertContent(e)},insertMarker:function(){var e=this;$(".list").on("click",".insert",function(){var o=$(this).attr("data-tag"),t=$(this).attr("data-default"),n=o?e.formatTag(o,t):t;n&&e.insertContent(n)})},settingsTinyMce:function(){var e=[],o=[];return e.toolbar="formatselect | bold italic underline strikethrough | link | bullist numlist | table | cut copy paste | fullscreen code | undo redo",o.toolbar="formatselect | bold italic  underline strikethrough | bullist numlist | link image | undo redo",e.plugins="autolink, autoresize, code, contextmenu, fullscreen, link, paste, print, table",o.plugins="autolink, autoresize, image, link",Pongo.Utils.mobileBrowser()?o:e},initTinyMce:function(e){this.editor=e}},Pongo.Form={href:null,redirect_uri:null,timeout:1e3,$form:null,loginForm:function(){var e=this;$(".pongo-login").on("click",function(o){o.preventDefault();var t=$(this);e.$form=t.parents("form"),Pongo.UI.addSpin(t),Pongo.UI.resetShake(),e.href=e.$form.attr("action"),e.sendRequest("login")})},saveForm:function(){},sendRequest:function(e){var o=this.validateForm;switch(e){case"login":o=this.validateLogin;break;case"form":o=this.validateForm}this.href?$.post(this.href,this.$form.serialize(),o,"json").done(function(){setTimeout(function(){Pongo.UI.resetBtn()},this.timeout)}):console.log("No this.href")},fieldErrors:function(e){Pongo.UI.addShake(),$.each(e,function(e,o){$item=$(".form-group[rel="+e+"]"),$item.find(".help-block").remove(),$item.addClass("has-error"),$item.children("label[for="+e+"]").append('<span class="err"> - '+o+"</span>")})},redirectTo:function(e){window.location=Pongo.Utils.url(e)},redirectUrl:function(e){window.location=e},validateForm:function(e){console.log("form",e),Pongo.UI.resetFieldErrors()},validateLogin:function(e){Pongo.UI.resetFieldErrors(),e.errors&&Pongo.Form.fieldErrors(e.errors),e.redirect&&Pongo.Form.redirectUrl(e.route),"error"==e.status&&Pongo.UI.addShake(),Pongo.UI.createAlertMessage(e)}},Pongo.Nestable={$page_list:$(".dd"),pageExpColl:function(){var e=this;$(".page-controls").on("click",function(o){var t=$(o.target),n=t.data("action");"expand-all"===n&&e.$page_list.nestable("expandAll"),"collapse-all"===n&&e.$page_list.nestable("collapseAll")})},pageList:function(){var e=this;e.$page_list.nestable({dropCallback:function(o){e.reorderPage(o)}}).on("reorder",function(){e.reorderPagePost()})},reorderPagePost:function(){var e=this,o=e.reorderPageStringify();$.post(Pongo.Utils.url("api/page/order"),{pages:o},function(o){Pongo.UI.createAlertMessage(o,null,null),setTimeout(function(){e.reorderPageReset()},Pongo.UI.timeout)},"json")},reorderPageStringify:function(){if(JSON&&this.$page_list){var e=$(".dd[rel="+Pongo.UI.lang+"]").nestable("serialize");return JSON.stringify(e)}var o={status:"error",msg:"Unsupported browser!"};Pongo.UI.createAlertMessage(o,null,null)}},Pongo.Templates={loading_tpl:'<i class="fa fa-refresh fa fa-spin"></i> '},Pongo.Toggle={$page_lang:$("#change-lang"),toggleOptions:function(){$(".options-toggle").on("click",function(e){e.preventDefault(),Pongo.UI.$body.toggleClass("push-left")})},togglePages:function(){$(".pages-toggle").on("click",function(e){e.preventDefault(),Pongo.UI.$body.hasClass("push-left")&&Pongo.UI.$body.removeClass(),Pongo.UI.$body.toggleClass("push-right")})},pageSelectLang:function(){var e=this;Pongo.UI.lang=this.$page_lang.val(),$(".dd[rel="+Pongo.UI.lang+"]").show(),this.$page_lang.on("change",function(){Pongo.UI.lang=e.$page_lang.val(),$.post(Pongo.Utils.url("api/page/lang"),{lang:Pongo.UI.lang},function(e){Pongo.Nestable.$page_list.hide(),$(".dd[rel="+Pongo.UI.lang+"]").show(),Pongo.UI.createAlertMessage(e,null,null)},"json")})}},Pongo.Utils={mobileBrowser:function(){return jQuery.browser.mobile?!0:!1},url:function(e){return Pongo.base+"/"+e}},console.log("pongo.js loaded and minified!",new Date);